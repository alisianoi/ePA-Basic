<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1118px" preserveAspectRatio="none" style="width:1836px;height:1118px;background:#FFFFFF;" version="1.1" viewBox="0 0 1836 1118" width="1836px" zoomAndPan="magnify"><defs/><g><rect fill="#DDDDDD" height="1099.3438" style="stroke:#181818;stroke-width:0.5;" width="385" x="303.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="177" x="407.5" y="18.0669">ePA Aktensystem (new)</text><rect fill="#DDDDDD" height="1099.3438" style="stroke:#181818;stroke-width:0.5;" width="614" x="859.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="200" x="1066.5" y="18.0669">ePA Aktensystem (current)</text><rect fill="#FFFFFF" height="414.5313" style="stroke:#0000FF;stroke-width:1.0;" width="10" x="393" y="686.8125"/><rect fill="#FFFFFF" height="537.5234" style="stroke:#0000FF;stroke-width:1.0;" width="10" x="612" y="120.1563"/><rect fill="#FFFFFF" height="448.9922" style="stroke:#0000FF;stroke-width:1.0;" width="10" x="926" y="179.5547"/><rect fill="#FFFFFF" height="230.0625" style="stroke:#0000FF;stroke-width:1.0;" width="10" x="1374" y="298.0859"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#0000FF;stroke-width:1.0;" width="10" x="1374" y="1057.2109"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:1.5;" width="469" x="539.5" y="194.5547"/><rect fill="none" height="219.7344" style="stroke:#000000;stroke-width:1.5;" width="1531.5" x="297.5" y="874.6094"/><line style="stroke:#0000FF;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="77" x2="77" y1="89.0234" y2="1111.3438"/><line style="stroke:#0000FF;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="397.5" x2="397.5" y1="89.0234" y2="1111.3438"/><line style="stroke:#0000FF;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="616.5" x2="616.5" y1="89.0234" y2="1111.3438"/><line style="stroke:#0000FF;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="930.5" x2="930.5" y1="89.0234" y2="1111.3438"/><line style="stroke:#0000FF;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1189.5" x2="1189.5" y1="89.0234" y2="1111.3438"/><line style="stroke:#0000FF;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1378.5" x2="1378.5" y1="89.0234" y2="1111.3438"/><line style="stroke:#0000FF;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1747" x2="1747" y1="89.0234" y2="1111.3438"/><rect fill="#3483EB" height="46.5938" rx="2.5" ry="2.5" style="stroke:#3483EB;stroke-width:0.5;" width="104" x="25" y="41.4297"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="32" y="61.4248">Kostenträger</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="57.5" y="77.7217">(new)</text><rect fill="#EB5E34" height="62.8906" rx="2.5" ry="2.5" style="stroke:#3483EB;stroke-width:0.5;" width="141" x="327.5" y="25.1328"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="377" y="45.1279">(VAU)</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="347" y="61.4248">Health Record</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="334.5" y="77.7217">Relocation Service</text><rect fill="#3483EB" height="46.5938" rx="2.5" ry="2.5" style="stroke:#3483EB;stroke-width:0.5;" width="95" x="569.5" y="41.4297"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="576.5" y="61.4248">Information</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="592" y="77.7217">Service</text><rect fill="#3483EB" height="46.5938" rx="2.5" ry="2.5" style="stroke:#3483EB;stroke-width:0.5;" width="95" x="883.5" y="41.4297"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="890.5" y="61.4248">Information</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="906" y="77.7217">Service</text><rect fill="#3483EB" height="46.5938" rx="2.5" ry="2.5" style="stroke:#3483EB;stroke-width:0.5;" width="87" x="1146.5" y="41.4297"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="1153.5" y="61.4248">Download</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="1161" y="77.7217">Location</text><rect fill="#EB5E34" height="62.8906" rx="2.5" ry="2.5" style="stroke:#3483EB;stroke-width:0.5;" width="141" x="1308.5" y="25.1328"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="1358" y="45.1279">(VAU)</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="1328" y="61.4248">Health Record</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="1315.5" y="77.7217">Relocation Service</text><rect fill="#3483EB" height="46.5938" rx="2.5" ry="2.5" style="stroke:#3483EB;stroke-width:0.5;" width="104" x="1695" y="41.4297"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="1702" y="61.4248">Kostenträger</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="1717" y="77.7217">(current)</text><rect fill="#FFFFFF" height="414.5313" style="stroke:#0000FF;stroke-width:1.0;" width="10" x="393" y="686.8125"/><rect fill="#FFFFFF" height="537.5234" style="stroke:#0000FF;stroke-width:1.0;" width="10" x="612" y="120.1563"/><rect fill="#FFFFFF" height="448.9922" style="stroke:#0000FF;stroke-width:1.0;" width="10" x="926" y="179.5547"/><rect fill="#FFFFFF" height="230.0625" style="stroke:#0000FF;stroke-width:1.0;" width="10" x="1374" y="298.0859"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#0000FF;stroke-width:1.0;" width="10" x="1374" y="1057.2109"/><polygon fill="#1E90FF" points="600,116.1563,610,120.1563,600,124.1563,604,120.1563" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="77" x2="606" y1="120.1563" y2="120.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="84" y="115.0903">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222" x="97" y="115.0903">Please create health record KVNRx</text><polygon fill="#1E90FF" points="914,175.5547,924,179.5547,914,183.5547,918,179.5547" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="622" x2="920" y1="179.5547" y2="179.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="629" y="159.356">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209" x="642" y="144.2231">Does health record KVNRx exist?</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="642" y="159.356">If yes, please relocate it to my side.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="642" y="174.4888">(ENC-Certificate  of provider)</text><path d="M539.5,194.5547 L603.5,194.5547 L603.5,201.6875 L593.5,211.6875 L539.5,211.6875 L539.5,194.5547 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="46.2656" style="stroke:#000000;stroke-width:1.5;" width="469" x="539.5" y="194.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="554.5" y="207.6216">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="192" x="618.5" y="206.7651">[Health record does not exist]</text><polygon fill="#1E90FF" points="633,228.8203,623,232.8203,633,236.8203,629,232.8203" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="627" x2="925" y1="232.8203" y2="232.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="639" y="227.7544">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="652" y="227.7544">This record is not known to me.</text><polygon fill="#1E90FF" points="1735,264.9531,1745,268.9531,1735,272.9531,1739,268.9531" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="936" x2="1741" y1="268.9531" y2="268.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="943" y="263.8872">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="327" x="956" y="263.8872">Please relocate KVNRx (ENC-Certificate of provider)</text><polygon fill="#1E90FF" points="1395,294.0859,1385,298.0859,1395,302.0859,1391,298.0859" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="1389" x2="1746" y1="298.0859" y2="298.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="1401" y="293.02">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="329" x="1414" y="293.02">Create export package (ENC-Certificate of provider)</text><line style="stroke:#1E90FF;stroke-width:1.0;" x1="1384" x2="1426" y1="327.2188" y2="327.2188"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="1426" x2="1426" y1="327.2188" y2="340.2188"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="1385" x2="1426" y1="340.2188" y2="340.2188"/><polygon fill="#1E90FF" points="1395,336.2188,1385,340.2188,1395,344.2188,1391,340.2188" style="stroke:#1E90FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="1391" y="322.1528">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331" x="1404" y="322.1528">Create Download-URL and set state to SUPSENDED</text><polygon fill="#1E90FF" points="1735,365.3516,1745,369.3516,1735,373.3516,1739,369.3516" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1384" x2="1741" y1="369.3516" y2="369.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="1391" y="364.2856">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="1404" y="364.2856">Download-URL</text><line style="stroke:#1E90FF;stroke-width:1.0;" x1="1384" x2="1426" y1="428.75" y2="428.75"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="1426" x2="1426" y1="428.75" y2="441.75"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="1385" x2="1426" y1="441.75" y2="441.75"/><polygon fill="#1E90FF" points="1395,437.75,1385,441.75,1395,445.75,1391,441.75" style="stroke:#1E90FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="1391" y="408.5513">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="1404" y="393.4185">Fetch all data from</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="1404" y="408.5513">internal services and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="1404" y="423.6841">form export package</text><line style="stroke:#1E90FF;stroke-width:1.0;" x1="1384" x2="1426" y1="486.0156" y2="486.0156"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="1426" x2="1426" y1="486.0156" y2="499.0156"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="1385" x2="1426" y1="499.0156" y2="499.0156"/><polygon fill="#1E90FF" points="1395,495.0156,1385,499.0156,1395,503.0156,1391,499.0156" style="stroke:#1E90FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="1391" y="473.3833">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="1404" y="465.8169">Encrypt export package with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="1404" y="480.9497">ENC-Certificate of provider</text><polygon fill="#1E90FF" points="1201,524.1484,1191,528.1484,1201,532.1484,1197,528.1484" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="1195" x2="1378" y1="528.1484" y2="528.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1207" y="523.0825">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="1229" y="523.0825">Store export package</text><polygon fill="#1E90FF" points="947,553.2813,937,557.2813,947,561.2813,943,557.2813" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="941" x2="1746" y1="557.2813" y2="557.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="953" y="552.2153">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="258" x="975" y="552.2153">Export package created (Download-URL)</text><line style="stroke:#1E90FF;stroke-width:1.0;" x1="936" x2="978" y1="586.4141" y2="586.4141"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="978" x2="978" y1="586.4141" y2="599.4141"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="937" x2="978" y1="599.4141" y2="599.4141"/><polygon fill="#1E90FF" points="947,595.4141,937,599.4141,947,603.4141,943,599.4141" style="stroke:#1E90FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="943" y="581.3481">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="965" y="581.3481">Check that export package exists</text><polygon fill="#1E90FF" points="633,624.5469,623,628.5469,633,632.5469,629,628.5469" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="627" x2="930" y1="628.5469" y2="628.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="639" y="623.481">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="258" x="661" y="623.481">Export package created (Download-URL)</text><polygon fill="#1E90FF" points="88,653.6797,78,657.6797,88,661.6797,84,657.6797" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="82" x2="616" y1="657.6797" y2="657.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="94" y="652.6138">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="342" x="116" y="652.6138">Export package created (Download-URL), start import</text><polygon fill="#1E90FF" points="381,682.8125,391,686.8125,381,690.8125,385,686.8125" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="77" x2="387" y1="686.8125" y2="686.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="84" y="681.7466">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275" x="106" y="681.7466">Import export package from Download-URL</text><polygon fill="#1E90FF" points="1178,711.9453,1188,715.9453,1178,719.9453,1182,715.9453" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="403" x2="1184" y1="715.9453" y2="715.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="410" y="710.8794">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="432" y="710.8794">Fetch export package</text><polygon fill="#1E90FF" points="88,741.0781,78,745.0781,88,749.0781,84,745.0781" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="82" x2="392" y1="745.0781" y2="745.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="94" y="740.0122">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="116" y="740.0122">OK</text><line style="stroke:#1E90FF;stroke-width:1.0;" x1="403" x2="445" y1="774.2109" y2="774.2109"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="445" x2="445" y1="774.2109" y2="787.2109"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="404" x2="445" y1="787.2109" y2="787.2109"/><polygon fill="#1E90FF" points="414,783.2109,404,787.2109,414,791.2109,410,787.2109" style="stroke:#1E90FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="410" y="769.145">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="432" y="769.145">Decrypt export package</text><line style="stroke:#1E90FF;stroke-width:1.0;" x1="403" x2="445" y1="846.6094" y2="846.6094"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="445" x2="445" y1="846.6094" y2="859.6094"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="404" x2="445" y1="859.6094" y2="859.6094"/><polygon fill="#1E90FF" points="414,855.6094,404,859.6094,414,863.6094,410,859.6094" style="stroke:#1E90FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="410" y="826.4106">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="432" y="811.2778">Extract all data from</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="432" y="826.4106">export package and give it</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="432" y="841.5435">to internal services</text><path d="M297.5,874.6094 L361.5,874.6094 L361.5,881.7422 L351.5,891.7422 L297.5,891.7422 L297.5,874.6094 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="219.7344" style="stroke:#000000;stroke-width:1.5;" width="1531.5" x="297.5" y="874.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="312.5" y="887.6763">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="186" x="376.5" y="886.8198">[import has been successful]</text><line style="stroke:#1E90FF;stroke-width:1.0;" x1="403" x2="445" y1="912.875" y2="912.875"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="445" x2="445" y1="912.875" y2="925.875"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="404" x2="445" y1="925.875" y2="925.875"/><polygon fill="#1E90FF" points="414,921.875,404,925.875,414,929.875,410,925.875" style="stroke:#1E90FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="410" y="907.8091">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="432" y="907.8091">Set state to ACTIVATED</text><polygon fill="#1E90FF" points="919,951.0078,929,955.0078,919,959.0078,923,955.0078" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="403" x2="925" y1="955.0078" y2="955.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="410" y="949.9419">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="432" y="949.9419">delete export package</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="297.5" x2="1829" y1="964.0078" y2="964.0078"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="211" x="302.5" y="974.2183">[import has not been successful]</text><polygon fill="#1E90FF" points="919,994.9453,929,998.9453,919,1002.9453,923,998.9453" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="403" x2="925" y1="998.9453" y2="998.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="410" y="993.8794">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="432" y="993.8794">import failed</text><polygon fill="#1E90FF" points="1735,1024.0781,1745,1028.0781,1735,1032.0781,1739,1028.0781" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="931" x2="1741" y1="1028.0781" y2="1028.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="938" y="1023.0122">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="960" y="1023.0122">relocation failed</text><polygon fill="#1E90FF" points="1395,1053.2109,1385,1057.2109,1395,1061.2109,1391,1057.2109" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="1389" x2="1746" y1="1057.2109" y2="1057.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1401" y="1052.145">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="1423" y="1052.145">Set state back to ACTIVATED</text><polygon fill="#1E90FF" points="1735,1082.3438,1745,1086.3438,1735,1090.3438,1739,1086.3438" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1379" x2="1741" y1="1086.3438" y2="1086.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1386" y="1081.2778">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="1408" y="1081.2778">OK</text><!--MD5=[eb25afc86c88b4cf34ee23dd7b0c2e02]
@startuml

skinparam Shadowing false
skinparam ParticipantPadding 20
skinparam BoxPadding 10

skinparam sequence {
    ArrowColor DodgerBlue
    ActorBorderColor DodgerBlue
    LifeLineBorderColor Blue

    ParticipantBackgroundColor #3483eb
    ParticipantBorderColor #3483eb
    ParticipantFontSize 14
    ParticipantFontColor White

    ActorBackgroundColor #3483eb
    ActorFontSize 14
    NoteBackgroundColor #3483eb
}

hide footbox
autonumber


participant "Kostenträger\n(new)" as ktr_n
box "ePA Aktensystem (new)"
participant "(VAU) \nHealth Record \nRelocation Service" as hrrl_n #eb5e34
participant "Information \nService" as info_n
end box
box "ePA Aktensystem (current)"
participant "Information \nService" as info_c
participant "Download \nLocation" as dl_c
participant "(VAU) \nHealth Record \nRelocation Service" as hrrl_c #eb5e34
end box
participant "Kostenträger\n(current)" as ktr_c

'create health record
ktr_n -> info_n : Please create health record KVNRx
activate info_n

' request export of health record
info_n -> info_c : Does health record KVNRx exist? \nIf yes, please relocate it to my side. \n(ENC-Certificate  of provider)
activate info_c
alt Health record does not exist
info_c - -> info_n : This record is not known to me.
end

info_c -> ktr_c : Please relocate KVNRx (ENC-Certificate of provider)
ktr_c -> hrrl_c : Create export package (ENC-Certificate of provider)
activate hrrl_c

hrrl_c -> hrrl_c : Create Download-URL and set state to SUPSENDED
hrrl_c - -> ktr_c : Download-URL

hrrl_c -> hrrl_c : Fetch all data from \ninternal services and \nform export package
hrrl_c -> hrrl_c : Encrypt export package with \nENC-Certificate of provider
hrrl_c -> dl_c : Store export package
deactivate hrrl_c

ktr_c - -> info_c : Export package created (Download-URL)

info_c -> info_c : Check that export package exists
info_c -> info_n : Export package created (Download-URL)
deactivate info_c

' Import health record
info_n -> ktr_n : Export package created (Download-URL), start import
deactivate info_n

ktr_n -> hrrl_n : Import export package from Download-URL
activate hrrl_n
hrrl_n -> dl_c : Fetch export package
hrrl_n - -> ktr_n : OK

hrrl_n -> hrrl_n : Decrypt export package
hrrl_n -> hrrl_n : Extract all data from \nexport package and give it \nto internal services

alt import has been successful
hrrl_n -> hrrl_n : Set state to ACTIVATED
hrrl_n -> info_c : delete export package
else import has not been successful
hrrl_n -> info_c : import failed
info_c -> ktr_c : relocation failed
ktr_c -> hrrl_c : Set state back to ACTIVATED
activate hrrl_c
hrrl_c - -> ktr_c : OK
deactivate hrrl_c
end

deactivate hrrl_n


@enduml

@startuml

skinparam Shadowing false
skinparam ParticipantPadding 20
skinparam BoxPadding 10

skinparam sequence {
    ArrowColor DodgerBlue
    ActorBorderColor DodgerBlue
    LifeLineBorderColor Blue

    ParticipantBackgroundColor #3483eb
    ParticipantBorderColor #3483eb
    ParticipantFontSize 14
    ParticipantFontColor White

    ActorBackgroundColor #3483eb
    ActorFontSize 14
    NoteBackgroundColor #3483eb
}

hide footbox
autonumber


participant "Kostenträger\n(new)" as ktr_n
box "ePA Aktensystem (new)"
participant "(VAU) \nHealth Record \nRelocation Service" as hrrl_n #eb5e34
participant "Information \nService" as info_n
end box
box "ePA Aktensystem (current)"
participant "Information \nService" as info_c
participant "Download \nLocation" as dl_c
participant "(VAU) \nHealth Record \nRelocation Service" as hrrl_c #eb5e34
end box
participant "Kostenträger\n(current)" as ktr_c

ktr_n -> info_n : Please create health record KVNRx
activate info_n

info_n -> info_c : Does health record KVNRx exist? \nIf yes, please relocate it to my side. \n(ENC-Certificate  of provider)
activate info_c
alt Health record does not exist
info_c - -> info_n : This record is not known to me.
end

info_c -> ktr_c : Please relocate KVNRx (ENC-Certificate of provider)
ktr_c -> hrrl_c : Create export package (ENC-Certificate of provider)
activate hrrl_c

hrrl_c -> hrrl_c : Create Download-URL and set state to SUPSENDED
hrrl_c - -> ktr_c : Download-URL

hrrl_c -> hrrl_c : Fetch all data from \ninternal services and \nform export package
hrrl_c -> hrrl_c : Encrypt export package with \nENC-Certificate of provider
hrrl_c -> dl_c : Store export package
deactivate hrrl_c

ktr_c - -> info_c : Export package created (Download-URL)

info_c -> info_c : Check that export package exists
info_c -> info_n : Export package created (Download-URL)
deactivate info_c

info_n -> ktr_n : Export package created (Download-URL), start import
deactivate info_n

ktr_n -> hrrl_n : Import export package from Download-URL
activate hrrl_n
hrrl_n -> dl_c : Fetch export package
hrrl_n - -> ktr_n : OK

hrrl_n -> hrrl_n : Decrypt export package
hrrl_n -> hrrl_n : Extract all data from \nexport package and give it \nto internal services

alt import has been successful
hrrl_n -> hrrl_n : Set state to ACTIVATED
hrrl_n -> info_c : delete export package
else import has not been successful
hrrl_n -> info_c : import failed
info_c -> ktr_c : relocation failed
ktr_c -> hrrl_c : Set state back to ACTIVATED
activate hrrl_c
hrrl_c - -> ktr_c : OK
deactivate hrrl_c
end

deactivate hrrl_n


@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>